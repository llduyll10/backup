define("ember-uploader",["ember-uploader/uploader","ember-uploader/s3","ember-uploader/file-field","exports"],function(e,r,t,i){"use strict";var a=e["default"];var n=r["default"];var s=t["default"];i["default"]={Uploader:a,S3Uploader:n,FileField:s}});define("ember-uploader/file-field",["exports"],function(e){"use strict";var r=Ember.deprecate;var t=Ember.set;var i=Ember.on;e["default"]=Ember.TextField.extend(Ember.Evented,{type:"file",attributeBindings:["multiple"],multiple:false,change:function(e){var r=e.target;if(!Ember.isEmpty(r.files)){this.trigger("filesDidChange",r.files);t(this,"files",r.files)}},_deprecateFileObserver:i("init",function(){var e=this.hasObserverFor("files");r("Observing the `files` attr is deprecated, use `filesDidChange` instead.",!e,{id:"ember-uploader.files-attr",until:"1.0"})})})});define("ember-uploader/s3",["ember-uploader/uploader","exports"],function(e,r){"use strict";var t=e["default"];var i=Ember.get,a=Ember.set,n=Ember.deprecate,s=Ember.on;r["default"]=t.extend({url:"/sign",headers:null,signRequestType:"GET",didSign:function(e){this.trigger("didSign",e);return e},upload:function(e,r){var t=this;a(this,"isUploading",true);return this.sign(e,r).then(function(r){var i;if(r.endpoint){i=r.endpoint;delete r.endpoint}else if(r.region){i="//s3-"+r.region+".amazonaws.com/"+r.bucket;delete r.region}else{i="//"+r.bucket+".s3.amazonaws.com"}var a=t.setupFormData(e,r);return t.ajax(i,a)})},sign:function(e,r){var t=this;var a=i(this,"url");r=r||{};r.name=e.name;r.type=e.type;r.size=e.size;var n=i(this,"signRequestType");if(n!=="GET"){r=JSON.stringify(r)}var s=this.ajaxSignSettings(a,r,n);return new Ember.RSVP.Promise(function(e,r){s.success=function(r){Ember.run(null,e,t.didSign(r))};s.error=function(e,i,a){Ember.run(null,r,t.didError(e,i,a))};Ember.$.ajax(s)})},ajaxSignSettings:function(e,r,t){return{url:e,headers:i(this,"headers"),type:t,contentType:"application/json",dataType:"json",data:r}},_deprecateHeadersProperty:s("init",function(){if(this.get("headers")){n("Using the `headers` property is deprecated, override `ajaxSignSettings` or `ajaxSettings` instead",{id:"ember-uploader.s3.headers",until:"1.0"})}})})});define("ember-uploader/uploader",["exports"],function(e){"use strict";var r=Ember.get,t=Ember.set;e["default"]=Ember.Object.extend(Ember.Evented,{url:null,paramNamespace:null,paramName:"file",isUploading:false,type:"POST",upload:function(e,i){i=i||{};var a=this.setupFormData(e,i);var n=r(this,"url");var s=r(this,"type");var o=this;t(this,"isUploading",true);return this.ajax(n,a,s)},setupFormData:function(e,r){var t=new FormData;for(var i in r){if(r.hasOwnProperty(i)){t.append(this.toNamespacedParam(i),r[i])}}if(Ember.isArray(e)){var a;for(var n=e.length-1;n>=0;n--){a=this.toNamespacedParam(this.paramName)+"["+n+"]";t.append(a,e[n])}}else{t.append(this.toNamespacedParam(this.paramName),e)}return t},toNamespacedParam:function(e){if(this.paramNamespace){return this.paramNamespace+"["+e+"]"}return e},didUpload:function(e){t(this,"isUploading",false);this.trigger("didUpload",e);return e},didError:function(e,r,i){t(this,"isUploading",false);var a=e!==null&&typeof e==="object";if(a){e.then=null;if(!e.errorThrown){if(typeof i==="string"){e.errorThrown=new Error(i)}else{e.errorThrown=i}}}this.trigger("didError",e,r,i);return e},didProgress:function(e){e.percent=e.loaded/e.total*100;this.trigger("progress",e)},abort:function(){t(this,"isUploading",false);this.trigger("isAborting")},ajaxSettings:function(e,r,t){var i=this;return{url:e,type:t||"POST",contentType:false,processData:false,xhr:function(){var e=Ember.$.ajaxSettings.xhr();e.upload.onprogress=function(e){i.didProgress(e)};i.one("isAborting",function(){e.abort()});return e},data:r}},ajax:function(e,r,t){return this._ajax(this.ajaxSettings(e,r,t))},_ajax:function(e){var r=this;return new Ember.RSVP.Promise(function(t,i){e.success=function(e){Ember.run(null,t,r.didUpload(e))};e.error=function(e,t,a){Ember.run(null,i,r.didError(e,t,a))};Ember.$.ajax(e)})}})});